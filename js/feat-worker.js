(function(){function ea(){return"true"==$('input[name="flipped"]').val()}function ra(a){var b=a.match(/(\d+)/);return b?(b=Math.max(parseInt(b[1],10)-1,0),(0==a.indexOf("R")?"right":"left")+".result."+b):null}function fa(a){if(!a)return null;var b=document.createElement("div");b.innerHTML=a;return b.firstChild.nodeValue}function ga(){I()&&(V&&clearInterval(V),sa=0,V=setInterval(function(){var a=$("div.modal-dialog:visible .goog-buttonset-default");a.length?a.click():(a=$('div[aria-describedby="mobile-device"]:visible button').eq(0),
a.length&&a.click());!a.length&&12>=++sa||(clearInterval(V),V=0)},333))}function D(a,b){if(!a)return a;0==a.toLowerCase().indexOf("query: ")&&(a=a.substr(7));a=a.trim().replace(/(^\s+|\s+$)/g,"");0==a.indexOf("[")&&(a=a.substr(1));a.length-1==a.indexOf("]")&&(a=a.substring(0,a.length-1));a.length-1==a.indexOf("^")&&(a=a.substring(0,a.length-1));return b?encodeURIComponent(a):a}function ta(a){a&&0==a.indexOf("/url?")&&(a="https://www.raterhub.com"+a);return a}function ha(){var a=Date.now();$("script").each(function(){var b=
$(this).text();(b=/timeToAutoExpirationMs\": ?(\d+)/.exec(b))&&(a+=parseInt(b[1],10)-72E5)});return 1E3*Math.floor(a/1E3)}function ua(a,b,c){c||(c=1);for(var g=[],k;k=b.exec(a);)g.push(k[c]);return g}function X(){var a=/taskIds=(\d+)/.exec(document.URL);if(a)return a[1];if(a=document.getElementById("taskIds"))return a.value;if(a=/view\/(\d+)$/.exec(document.URL))return a[1];a=$('input[name="task.id"]').eq(0);if(a.length)return a.val();a=$("a#toggle-feedback").eq(0).prev("a");return a.length?a.attr("href").match(/\/(\d+)$/)[1]:
0}function va(a){switch(a){case "55":return"google.com.br";case "2":return"google.ca";case "20":return"google.com.eg";case "33":return"google.fr";case "49":return"google.de";case "39":return"google.it";case "852":return"google.com.hk";case "81":return"google.co.jp";case "82":return"google.co.kr";case "351":return"google.pt";case "7":return"google.ru";case "34":return"google.es";case "886":return"google.com.tw";case "44":return"google.co.uk";case "61":return"google.com.au";case "62":return"google.com.my";
default:return"google.com"}}function y(a,b,c){var g=[];if(a.left.length){var k={name:"Left",urls:a.left,labels:b.left,blockIds:[]};c&&c.left&&(k.blockIds=c.left);g.push(k)}a.right.length&&(k={name:"Right",urls:a.right,labels:b.right,blockIds:[]},c&&c.right&&(k.blockIds=c.right),g.push(k));if(a.left.length&&a.right.length){var h={name:" + ",urls:[],labels:[],blockIds:[]},k=Y?1:0,t=Y?0:1;$.each(g[k].urls,function(a,b){h.urls.push(b)});$.each(g[t].urls,function(a,b){h.urls.push(b)});$.each(g[k].labels,
function(a,b){h.labels.push(b)});$.each(g[t].labels,function(a,b){h.labels.push(b)});$.each(g[k].blockIds,function(a,b){h.blockIds.push(b)});$.each(g[t].blockIds,function(a,b){h.blockIds.push(b)});g.splice(1,0,h)}if(6<a.left.length){for(var k=c&&c.left,t=b.left,m=a.left,e={urls:[],labels:[],blockIds:[]},x={urls:[],labels:[],blockIds:[]},d=Math.max(5,Math.round(a.left.length/2)),n=0;n<d;n++)e.urls.push(m[n]),e.labels.push(t[n]),k&&e.blockIds.push(k[n]);for(n=d;n<m.length;n++)x.urls.push(m[n]),x.labels.push(t[n]),
k&&x.blockIds.push(k[n]);e.name=e.labels[0]+"-"+e.labels[e.labels.length-1].replace("L","");x.name=1<x.labels.length?x.labels[0]+"-"+x.labels[x.labels.length-1].replace("L",""):x.labels[0].replace("L","");g.push(" | ");g.push(e);g.push(x)}if(6<a.right.length){k=c&&c.right;t=b.right;m=a.right;e={urls:[],labels:[],blockIds:[]};x={urls:[],labels:[],blockIds:[]};d=Math.max(5,Math.round(a.right.length/2));for(n=0;n<d;n++)e.urls.push(m[n]),e.labels.push(t[n]),k&&e.blockIds.push(k[n]);for(n=d;n<m.length;n++)x.urls.push(m[n]),
x.labels.push(t[n]),k&&x.blockIds.push(k[n]);e.name=e.labels[0]+"-"+e.labels[e.labels.length-1].replace("R","");x.name=1<x.labels.length?x.labels[0]+"-"+x.labels[x.labels.length-1].replace("R",""):x.labels[0].replace("R","");g.push(" | ");g.push(e);g.push(x)}return g}function C(a){var b=["https://www.google.com/evaluation/url?q=","https://www.raterhub.com/evaluation/url?q="];if(a)for(var c=0;c<b.length;c++){var g=b[c];if(0==a.indexOf(g)&&a.length>g.length){a=decodeURIComponent(a.slice(g.length));
break}}return a}function Z(){if(I()&&W)if($(this).is(".ewok-supplemental-file-upload-sendtodevice-button"))setTimeout(function(){l.postMessage({method:"send-to-device",url:"https://www.raterhub.com/url"})},500);else{var a=$(this).attr("data-oldhref")||$(this).attr("oldhref");a&&l.postMessage({method:"send-to-device",url:C(a)})}}function wa(a){$('input[name="nomoredupe"], input[name="nomoredupes"], input[name="confirmFlags"]').prop("checked",a)}function G(){function a(a){a=(Math.round(100*a)/100).toString();
return-1!=a.indexOf(".25")||-1!=a.indexOf(".75")}function b(a,b){b?(a.css("outline-style","dashed"),a.css("outline-color","#ff0000")):(a.css("outline-style","initial"),a.css("outline-color","initial"))}if("undefined"===typeof ia){var c=$("div.evl-slider2-tick-big").length,g=$("div.evl-slider2-tick-tiny").length;ia=c&&!g}if(!ia){var k=!1;$("input.evl-slider2-value-field").each(function(){var c=$(this);if(-1!=c.parent().text().indexOf("Related"))return!1;if(-1!=c.attr("name").indexOf("stars")){var g=
a(c.val()),c=c.closest(".ewok-buds-slider");b(c,N&&g&&O&&L);k=!0}});k||(c=$("div.ewokui-slider-horizontal input"),c.length||(c=$("div.ewokui-slider-horizontal").prev("input")),c.each(function(){var c=$(this),g=c.attr("name");if(-1!=g.indexOf("stars")||-1!=g.indexOf("ExptUtility")||0==g.indexOf("score_name")){var g=a(c.val()),e=c.closest("div.utility-slider-bar");e.length||(e=c.closest("div.ewokui-slider-horizontal"));e.length||(e=c.parent().find("div.ewokui-slider-horizontal"));b(e,N&&g&&O&&L);k=
!0}}))}}function Ja(a){if(ea())if(1<a.length){var b=a[0].urls;a[0].urls=a[1].urls;a[1].urls=b}else 1==a.length&&("Left"==a[0].name?a[0].name="Right":"Right"==a[0].name&&(a[0].name="Left"))}function Q(a){if(!a||!a.length)return null;try{var b=a.attr("src"),c=b.indexOf("base64,");if(-1==c){var g=a.contents(),k=R(g.find("a"));return k&&k.attr("href")||null}var b=window.atob(b.slice(c+7)),h=ua(b,/<a([^>]*)/g);a=[];var e=parseInt(ua(b,/height: (\d+)px/g)[0],10);if(!isNaN(e)&&300<=e)return null;for(b=0;b<
h.length;b++){var m=h[b],w=/href="([^"]*)/.exec(m);if(w&&(w=w[w.length-1],0!=w.indexOf("https://maps.google.com")&&0!=w.indexOf("https://webcache.googleusercontent.com"))){var x=/top:([^;]*)/.exec(m);(x=x?x[x.length-1]:null)&&(x=parseInt(x,10));var d=/left:([^;]*)/.exec(m);(d=d?d[d.length-1]:null)&&(d=parseInt(d,10));var n=/width:([^;]*)/.exec(m),n=n?parseInt(n[n.length-1],10):null;a.push({url:w,top:x,left:d,width:n})}}a.sort(function(a,b){return null!==a.top&&null!==b.top&&a.top!=b.top?a.top-b.top:
null!==a.left&&null!==b.left&&a.left!=b.left?b.left-a.left:null!==a.width&&null!==b.width&&a.width!=b.width?b.width-a.width:0});return a.length?fa(a[0].url):null}catch(l){console.error("Error in urlFromIFrame: "+l.message)}return null}function Ka(a){if(!a)return null;var b=a.indexOf("http");if(-1==b)return null;a=a.slice(b);1<a.length&&"\\"==a.charAt(a.length-1)&&(a=a.slice(0,a.length-1));return a}function La(){var a=null;$("div.ewok-buds-sides div.ewok-buds-result").each(function(){if("rgb(36, 39, 186) solid 3px"==
$(this).css("outline"))return a=ja($(this)),!1});return a}function S(a,b){var c=null,g={};$("div.ewok-buds-sides div.ewok-buds-result, div.result").each(function(){var b=$(this);a&&a==b.attr("id")?(b.css("outline","rgb(36, 39, 186) solid 3px"),c=b.find("span.ewok-buds-result-dupes").text().match(/(L\d+|R\d+)/g)):b.css("outline","none");var h=b.find("span.ewok-buds-result-label").text().toUpperCase();g[h]=b});c&&$.each(c,function(a,b){g[b]&&g[b].css("outline","rgb(36, 39, 186) dotted 3px")})}function I(){return xa==
$(document.body).attr("current-feat")}function ya(){za();$(document.body).on("click","a",Aa).on("mouseenter",".ewok-buds-card.ewok-buds-result, div.result-div",E).on("mouseleave",".ewok-buds-card.ewok-buds-result, div.result-div",F)}function za(){$(document.body).off("click","a",Aa).off("mouseenter",".ewok-buds-card.ewok-buds-result, div.result-div",E).off("mouseleave",".ewok-buds-card.ewok-buds-result, div.result-div",F)}function ja(a){var b=null,b=a.closest(".ewok-buds-result").attr("id");if(!b){var c=
a.closest("div.result").find("div.result-number").text().trim();c||(c=a.find("div.result-number").text().trim());c.match(/L\d+|R\d+/)&&(b=ra(c));!b&&(c=a.find(".refinementNum").text())&&(b=1==a.index()?"right":"left",c=Math.max(parseInt(c,10)-1,0),b=b+".result."+c)}b||(a=a.closest("table.result").attr("id"))&&a.match(/(left|right)\.result\.\d/)&&(b=a);return b}function E(a){if(I()&&L&&aa&&ka){a=$(this).closest(".ewok-buds-result, div.result");var b=ja($(this));if(b){var c=null;a.find(".ewok-buds-result-dupes, div.dupe-message").length&&
(a=a.find(".ewok-buds-result-dupes, div.dupe-message").text().match(/(L|R)(\d+)/))&&(c=ra(a[0]));H&&clearTimeout(H);H=setTimeout(function(){H=0;var a={method:"focus-block-tab",blockId:b};c&&(a.dupeId=c);l.postMessage(a)},333)}else{var g=C($(this).find("a").eq(0).attr("href"));g&&(H&&clearTimeout(H),H=setTimeout(function(){H=0;l.postMessage({method:"focus-block-tab",url:g})},275))}}}function F(a){I()&&H&&(clearInterval(H),H=0)}function Aa(a){if(I()&&L&&!Ba){var b=$(a.target).closest("a"),c=b.attr("href");
if(c&&-1!=c.indexOf("url?q=")||Ca&&c&&-1!=c.indexOf("facebook.com")){var c=C(c),b=ja($(this)),g=$(this).closest(".ewok-buds-result").find(".ewok-buds-result-label").eq(0).text().trim().toUpperCase();if(!g){var k=$(this).closest("div.result").find("div.result-number").text().match(/((L|R)\d+)/);k&&(g=k[1])}k=0!=c.indexOf("/url?q=");if(aa&&la&&k)return c={method:"open-urls",urls:[c],isAdditive:a.ctrlKey||a.metaKey,openSeparately:!0},b&&(c.blockIds=[b]),g&&(c.labels=[g]),l.postMessage(c),a.preventDefault(),
!1;c={method:"will-open-task-link",url:C(c)};b&&(c.blockId=b);l.postMessage(c)}else b.is(".ewok-buds-result-finish-dupes-link")&&(b=La())&&S(b)}}function e(a,b,c){var g=$(document.createElement("a")).attr("target","_blank");b&&g.attr("href",b);" + "!=a&&"\u2715"!=a&&g.css("text-decoration","underline");a=$(document.createElement("strong")).text(a);c.append(g.append(a));return g.css("padding-right","4px")}function Da(a){try{var b=function(a){return"https://www."+va(B)+"/search?q="+encodeURIComponent(a.trim())};
$("#ra-raterbar, #ra-raterbar2, #ra-raterbar3").remove();if(!a)return!1;if(!B){var c;$(".ewok-task-query, .query-info-query strong, .query-info strong, .ewok-buds-query").each(function(){var a=($(this).closest("div").text()||"").match(/Locale: (.+)/);if(a)return c=a[1],!1});c&&(-1!=c.indexOf("(US)")?B="1":-1!=c.indexOf("(BR)")?B="55":-1!=c.indexOf("(CA)")?B="2":-1!=c.indexOf("(EG)")?B="20":-1!=c.indexOf("(FR)")?B="33":-1!=c.indexOf("(DE)")?B="49":-1!=c.indexOf("(IT)")?B="39":-1!=c.indexOf("(HK)")?
B="852":-1!=c.indexOf("(JP)")?B="81":-1!=c.indexOf("(PT)")?B="351":-1!=c.indexOf("(RU)")?B="7":-1!=c.indexOf("(ES)")?B="34":-1!=c.indexOf("(TW)")?B="886":-1!=c.indexOf("(GB)")?B="44":-1!=c.indexOf("(CN)")?B="852":-1!=c.indexOf("(AU)")?B="61":-1!=c.indexOf("(KO)")?B="82":-1!=c.indexOf("(KR)")?B="82":-1!=c.indexOf("(ID)")&&(B="62"))}var g=!(!a.query||!a.query.match(/\d\d\d\d-\d\d-\d\d+\s@\s\d\d:\d\d:\d\d/)),k=D(a.query,!0)||a.url||a.urls;if(!k&&"local cards"!=a.type&&"snapshots"!=a.type&&"safesearch"!=
a.type&&"indepths single"!=a.type&&"page quality"!=a.type&&"shareagraphs"!=a.type&&"page descriptions"!=a.type&&"event listings"!=a.type&&"future queries"!=a.type&&"image entities"!=a.type&&"candidate queries"!=a.type&&"other"!=a.type)return!1;var h=va(B);c=a.location;var t,m="";a.links&&a.links.length&&T&&$.each(a.links,function(a,b){b.urls&&15<=b.urls.length&&(console.log("URL auto-opening disabled"),T=!1)});if("sxs local"==a.type){var w=$("h3").eq(0);if(!w.length)var w=$(".query-info-query").eq(0),
x=!!w.length;if(!w.length)return!1;var d=$(document.createElement(x?"div":"h5")).attr("id","ra-raterbar").text("Search: ").css("font-size","12px").css("-webkit-user-select","none");x&&d.css("padding-top","8px");var n="q="+k;t="https://www."+h+"/search?"+(m+n);e("Web",t,d);e("Maps","https://maps."+h+"/maps?"+n,d);c&&(d.append('<span style="padding-right:4px">|</span>'),e("Location","https://maps."+h+"/maps?q=loc:"+encodeURIComponent(c),d));w.append(d);if(a.links&&a.links.length){var r=$(document.createElement(x?
"div":"h5")).attr("id","ra-raterbar2").text("Links: ").css("font-size","12px").css("-webkit-user-select","none");x&&r.css("padding","8px 0");for(var q=0;q<a.links.length;q++){var f=a.links[q];if("string"!==typeof f){var u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u);p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),
urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()})}else r.append('<span style="padding-right:4px">'+f+"</span>")}p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});w.append(r)}}else if("stales"==a.type){w=$(".query").eq(0).closest("td");if(!w.length)return!1;d=$(document.createElement("div")).attr("id",
"ra-raterbar").text("Search: ").css("font-size","14px").css("-webkit-user-select","none").css("padding-top","18px").css("font-weight","bold");n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,d);e("News","https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);w.append(d);if(a.links&&a.links.length){r=
$(document.createElement("div")).attr("id","ra-raterbar2").text("Links: ").css("font-size","14px").css("-webkit-user-select","none").css("padding","8px 0").css("font-weight","bold");for(q=0;q<a.links.length;q++)f=a.links[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",
className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()})):r.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});w.append(r)}}else if(0==a.type.indexOf("rr image")||"rr video"==a.type||"rr book"==a.type){var v=
$(".rr-item-table").eq(0);if(!v.length)return!1;var A=$(document.createElement("tr")).attr("id","ra-raterbar"),z=$(document.createElement("td")).addClass("label-text").text("Search");A.append(z);d=$(document.createElement("td"));m+="q="+k;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);0==a.type.indexOf("rr image")&&e("By Image","https://"+h+"/searchbyimage?image_url="+a.imgUrl,d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+
k,d);if(a.links&&a.links.length)for(d.append($(document.createElement("span")).addClass("label").text("Links: ").css("padding-left","10px")),q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),inNewWindow:b.shiftKey});
a.validate&&a.validate()}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}),a.auto&&l.postMessage({method:"auto-open-urls",urls:f.urls});A.append(d);v.find("tr").each(function(){if(-1!=$(this).text().indexOf("Query"))return A.insertAfter($(this)),!1})}else if("buds"==a.type){b=!1;v=$("div#ewok-plus-query:visible").eq(0);v.length||(v=$("h2#editable-4"),v.length&&(b=!0));var y=$('h2:contains("Compare Search Result Pages of Current Query")');
y.length&&(v=y.eq(0).parent("div.ewok-buds-card"));if(!v.length)return!1;var d=$(document.createElement("div")).attr("id","ra-raterbar").css("margin-top","4px").css("-webkit-user-select","none"),J=$(document.createElement("span")).addClass("label");d.append(J);n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,d);e("News","https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');
e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);a.location?e("Location","https://maps."+h+"/?q="+encodeURIComponent(a.location),d):$('div:contains("YouTube"), p:contains("shelves")').length&&e("YouTube","https://www.youtube.com/results?search_query="+k,d);y.length&&d.css("padding-top","12px");g||b||v.append(d);if(a.links&&a.links.length){d=$(document.createElement("div")).attr("id","ra-raterbar2").css("margin-top","2px").css("-webkit-user-select","none");J=$(document.createElement("span")).addClass("label");
d.append(J);for(q=0;q<a.links.length;q++)f=a.links[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),f.blockIds&&p.attr("data-blockids",JSON.stringify(f.blockIds)),p.click(function(a){a={method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),
inNewWindow:a.shiftKey,isAdditive:a.altKey};var b=$(this).attr("data-blockids");b&&(a.blockIds=JSON.parse(b));l.postMessage(a)})):d.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});b?(d.css("margin-top","4px"),v.after(d)):(v.append(d),d=d.clone(!0).attr("id","ra-raterbar3").css("margin-top","2px"),$(".ewok-buds-query-card").eq(0).append(d))}$(".ewok-buds-query-card span.ewok-task-query").eq(0).css("text-decoration",
"underline").css("cursor","pointer").click(function(){window.open(t)})}else if("s2d"==a.type){v=$(".ewok-buds-query-inline").eq(0);if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("margin-top","4px").css("-webkit-user-select","none");J=$(document.createElement("span")).addClass("label");d.append(J);n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,d);e("News",
"https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);v.append(d);$(".ewok-buds-query-card span.ewok-task-query").eq(0).css("text-decoration","underline").css("cursor","pointer").click(function(){window.open(t)})}else if("target videos"==a.type){v=$(".ratingTable").eq(0);if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("font-size","14px").css("-webkit-user-select",
"none").css("padding","6px 0 22px 0").css("font-weight","bold");e("Target Video","https://www.raterhub.com/evaluation/url?q="+k,d);if(a.links&&a.links.length){d.append($(document.createElement("span")).addClass("label").text("Related Videos: ").css("padding-left","8px"));for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||
null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()});p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1})}v.prepend(d)}else if("simulator"==a.type){b=function(a){var b=$("#bu-sim-header");
$.each(a,function(c){$(this).css("background-color",b.css("background-color")).css("padding",b.css("padding")).css("font-size","14px").css("border-left","1px solid #cccccc").css("border-right","1px solid #cccccc");a.length-1==c&&$(this).css("border-bottom","1px solid #cccccc")});$("#bu-sim-sub-header").css("border-bottom","none")};v=$("#bu-sim-sub-header");if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").addClass("query-attribute query-info-locale ewok-sxs-query-info-locale").css("-webkit-user-select",
"none");J=$(document.createElement("span")).addClass("label").text("Search: ");d.append(J);n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,d);e("News","https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);v.after(d);r=$(document.createElement("div")).attr("id","ra-raterbar2").text("Links: ").css("font-size",
"12px").css("-webkit-user-select","none");for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u).css("cursor","pointer"),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),
inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()});if(Ma)p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}).css("cursor","pointer"),b([d,r]),a.links&&a.links.length&&d.after(r);else if(Ba){var M=$(document.createElement("div")).attr("id","ra-raterbar3").text("Links: ").css("font-size","12px").css("-webkit-user-select","none"),p=e("Send to RaterAide",null,M).css("cursor","pointer");
p.click(function(){Na(a)});b([d,M]);a.links&&a.links.length&&($(document.body).on("click","a",function(){if(L&&$(this).closest("div.bu-sim-html").length){var a=$(this).attr("href");a&&l.postMessage({method:"send-to-device",url:a})}}),d.after(M))}}else if("entity lists"==a.type){var C=!!$('div:contains("Original Entity")').length,G=!!$('label:contains("Worth watching")').length,v=$('th:contains("User\'s Query"), th:contains("Entity")').closest("tr").find("td").eq(0);v.length||(v=$('div:contains("Original Entity")').closest("tr").find("td").eq(1));
if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("margin-top","12px").css("margin-bottom","4px").css("-webkit-user-select","none");C||G||(J=$(document.createElement("span")).addClass("label").text("Search: "),d.append(J),n="q="+k,m+=n,t="https://www."+h+"/search?"+m,e("Web",t,d),e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d),e("Maps","https://maps."+h+"/maps?"+n,d),e("News","https://www."+h+"/search?"+m+"&tbm=nws",d),d.append('<span style="padding-right:4px">|</span>'),
e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d));v.append(d);if(a.links&&a.links.length&&!C){r=$(document.createElement("span")).addClass("label").attr("id","ra-raterbar2").text("Links: ").css("-webkit-user-select","none");G||r.css("padding-left","8px");for(q=0;q<a.links.length;q++)f=a.links[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",
JSON.stringify(f.labels||null)).attr("class",u),f.blockIds&&p.attr("data-blockids",JSON.stringify(f.blockIds)),p.click(function(a){a={method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey};var b=$(this).attr("data-blockids");b&&(a.blockIds=JSON.parse(b));l.postMessage(a)})):r.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left",
"2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});v.append(r)}}else if("indepths"==a.type||"sxs indepths"==a.type||"indepths single"==a.type||"news & blogs"==a.type){d=$(document.createElement("div")).attr("id","ra-raterbar").addClass("query-attribute query-info-locale ewok-sxs-query-info-locale").css("-webkit-user-select","none");"sxs indepths"==a.type?d.css("margin-bottom","16px"):"indepths single"==a.type?d.css("margin-top","8px").css("margin-bottom","12px"):
"news & blogs"==a.type&&d.css("margin-bottom","20px");if(a.links&&a.links.length){d.append($(document.createElement("span")).addClass("label").text("Links: "));for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),
urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})});p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1})}"news & blogs"==a.type?$(".ewok-editor-editable-columngroup").eq(0).before(d):$(".tasktable, .ewok-editor-editable-columngroup").eq(0).prepend(d)}else if("completions"==a.type){if(a.links&&a.links.length){var E=
!!$('b:contains("Completions Lists")').length,A=$(document.createElement(E?"div":"tr")).attr("id","ra-raterbar").css("-webkit-user-select","none"),z=$(document.createElement("td")).addClass("label").text("Query: ").css("padding-bottom","12px");A.append(z);n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,z);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",z);e("Maps","https://maps."+h+"/maps?"+n,z);e("News","https://www."+h+"/search?"+m+"&tbm=nws",z);z.append('<span style="padding-right:4px">|</span>');
e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,z);A.append($(document.createElement(E?"span":"th")).addClass("label-text").text("Links"));z=$(document.createElement(E?"span":"td")).attr("colspan","2").css("padding","10px 8px");A.append(z);for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",
u).css("padding-right","4px"),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey});a.validate&&a.validate()});p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});E?($('b:contains("Completions Lists")').closest("div.ewok-buds-card").before(A),A.css("margin-top",
"12px")):$('th:contains("User Intent")').closest("tr").after(A)}}else if("related entities"==a.type||"sxs related entities"==a.type){if(a.links&&a.links.length){A=$(document.createElement("tr")).attr("id","ra-raterbar");A.append($(document.createElement("th")).text("Links"));z=$(document.createElement("td")).css("padding","10px 2px");A.append(z);for(q=0;q<a.links.length;q++)f=a.links[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":
"",p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey});a.validate&&a.validate()})):z.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});
return!1});$('th:contains("Related Entities"), th:contains("entities"), th:contains("Lists of")').closest("tr").before(A)}}else if("target lps"==a.type){v=$('p:contains("How likely is it that this user")');if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-top","12px").css("-webkit-user-select","none");a.urls&&(p=e("Landing Pages",null,d).attr("data-urls",JSON.stringify(a.urls)).attr("data-labels",JSON.stringify(a.labels)).attr("class","ra-links"),p.click(function(a){l.postMessage({method:"open-urls",
className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}));v.append(d)}else if("hubpages"==a.type){v=$('h2:contains("Rating")');if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-bottom","12px").css("padding-top",
"12px").css("-webkit-user-select","none");a.urls&&(p=e("Links",null,d).attr("data-urls",JSON.stringify(a.urls)).attr("data-labels",JSON.stringify(a.labels)).css("font-size","12px").attr("class","ra-links"),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").css("font-size",
"12px").click(function(){l.postMessage({method:"close-worker-tabs"});return!1}).hide());v.before(d)}else if("shareagraphs"==a.type){v=$('h1:contains("Your Response")').prev();if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-top","12px").css("padding-bottom","12px").css("-webkit-user-select","none");a.urls&&(p=e("Links",null,d).attr("data-urls",JSON.stringify(a.urls)).attr("data-labels",JSON.stringify(a.labels)).css("font-size","12px").attr("class","ra-links"),
p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").css("font-size","12px").click(function(){l.postMessage({method:"close-worker-tabs"});return!1}).hide(),l.postMessage({method:"auto-open-urls",urls:a.urls}),v.before(d))}else if("image BU"==a.type){v=$(".query-info, .ewok-sxs-query-info").eq(0);
if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").addClass("query-attribute query-info-locale ewok-sxs-query-info-locale").css("-webkit-user-select","none");r=d.clone().attr("id","ra-raterbar2");M=d.clone().attr("id","ra-raterbar3");J=$(document.createElement("span")).addClass("label").text("Search: ");d.append(J);n="q="+k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,
d);e("News","https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);v.append(d);var F=a.links[1];if(F.length){r.append($(document.createElement("span")).addClass("label").text("LP Links: "));for(q=0;q<F.length;q++)f=F[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",
JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()})):r.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});
v.append(r)}var H=a.links[0];if(H.length){M.append($(document.createElement("span")).addClass("label").text("Image Links: "));for(q=0;q<H.length;q++)f=H[q],"string"!==typeof f?(u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,M).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),
labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey});a.validate&&a.validate()})):M.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,M).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});v.append(M)}}else if("local cards"==a.type){if(a.links&&a.links.length){A=$(document.createElement("tr")).attr("id","ra-raterbar");z=$(document.createElement("td")).css("padding",
"16px initial").attr("colspan","2");A.append(z);for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey});
a.validate&&a.validate()});p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$('span:contains("Results of")').closest("tr").after(A)}}else if("bad page rating"==a.type)d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-left","24px").css("padding-top","24px").css("-webkit-user-select","none"),p=e("Links",null,d).attr("data-urls",JSON.stringify(a.urls)).attr("data-labels",
JSON.stringify(a.labels)).attr("class","ra-links"),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey})}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}),$('h3:contains("Bad Page Rating")').eq(0).before(d),l.postMessage({method:"auto-open-urls",
urls:a.urls});else if("app concepts"==a.type){if(a.links&&a.links.length){A=$(document.createElement("tr")).attr("id","ra-raterbar");z=$(document.createElement("td")).css("padding","16px initial").attr("colspan","2").css("padding-left","26px");A.append(z);for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",
u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey})});p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$(".ewok-editor-editable-columngroup tr").eq(0).after(A)}}else if("candidate queries"==a.type){if(a.links&&a.links.length){A=$(document.createElement("tr")).attr("id",
"ra-raterbar");z=$(document.createElement("td")).addClass("ewok-editor-editable-column");A.append(z);for(q=0;q<a.links.length;q++){f=a.links[q];for(k=0;k<f.urls.length;k++)f.urls[k]=b(f.urls[k]);p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls));u=f&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"";p.attr("class",u);p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),inNewWindow:b.shiftKey});
a.validate&&a.validate()})}p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$("td#editable-39").closest("tr").after(A)}}else if("snapshots"==a.type)a.links&&a.links.length&&(d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding","4px 0 20px 0").css("-webkit-user-select","none"),d.append("<span>Links: </span>"),f=a.links[0],u="ra-links",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",
JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})}),p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}),$("table.news_headline").first().before(d),d=$(document.createElement("div")).attr("id",
"ra-raterbar").css("padding","4px 0 20px 0").css("-webkit-user-select","none"),d.append("<span>Links: </span>"),f=a.links[2],u="ra-links",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})}),p=e("\u2715",
null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1}),$("table.news_headline").last().before(d));else if("PCQ"==a.type||"safesearch"==a.type||"page descriptions"==a.type||"event listings"==a.type||"image entities"==a.type||"other"==a.type){if(a.links&&a.links.length){var d=$(document.createElement("div")).attr("id","ra-raterbar"),I=$(document.createElement("span"));d.append(I);for(q=0;q<a.links.length;q++)u=(f=
a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,I).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey});a.validate&&a.validate()});p=e("\u2715",null,I).attr("class","ra-close-links").css("margin-left",
"2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$("#ewok-task-container").after(d.hide())}}else if("local prediction lists"==a.type){if(a.links&&a.links.length){A=$(document.createElement("tr")).attr("id","ra-raterbar");A.append($(document.createElement("th")).text("Links"));z=$(document.createElement("td")).css("padding","10px 10px");A.append(z);for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":
"ra-links":"",p=e(f.name,null,z).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),(0<q||1==a.links.length||"sxs related entities"==a.type)&&p.attr("class",u),p.click(function(b){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey});a.validate&&a.validate()});p=e("\u2715",null,z).attr("class","ra-close-links").css("margin-left",
"2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$('th:contains("Prediction Lists")').closest("tr").before(A)}}else if("page quality"==a.type){d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding","4px 0 20px 0").css("-webkit-user-select","none");for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",
JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})});p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$("div.pq-task-main-info").eq(0).after(d);$("#ra-raterbar").css("display",
"none")}else if("thumbnail pages"==a.type){d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-bottom","12px").css("-webkit-user-select","none");for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),
urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})});p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$("div#editable-52").before(d)}else if("future queries"==a.type){d=$(document.createElement("div")).attr("id","ra-raterbar").css("padding-bottom","12px").css("-webkit-user-select","none");for(q=0;q<a.links.length;q++)u=
(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"",p=e(f.name,null,d).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),p.click(function(a){l.postMessage({method:"open-urls",className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:a.shiftKey,isAdditive:a.altKey})});p=e("\u2715",null,d).attr("class","ra-close-links").css("margin-left",
"2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});$('p:contains("landing pages below")').after(d)}else{v=$(".query-info, .ewok-sxs-query-info").eq(0);if(!v.length)return!1;d=$(document.createElement("div")).attr("id","ra-raterbar").addClass("query-attribute query-info-locale ewok-sxs-query-info-locale").css("-webkit-user-select","none");r=d.clone().attr("id","ra-raterbar2");J=$(document.createElement("span")).addClass("label").text("Search: ");d.append(J);n="q="+
k;m+=n;t="https://www."+h+"/search?"+m;e("Web",t,d);e("Images","https://www."+h+"/search?"+m+"&tbm=isch",d);e("Maps","https://maps."+h+"/maps?"+n,d);e("News","https://www."+h+"/search?"+m+"&tbm=nws",d);d.append('<span style="padding-right:4px">|</span>');e("Wiki","http://en.wikipedia.org/w/index.php?search="+k,d);a.location?e("Location","https://maps."+h+"/?q="+encodeURIComponent(a.location),d):$('div:contains("YouTube"), p:contains("shelves")').length&&e("YouTube","https://www.youtube.com/results?search_query="+
k,d);v.append(d);if(a.links&&a.links.length){r.append($(document.createElement("span")).addClass("label").text("Links: "));for(q=0;q<a.links.length;q++)u=(f=a.links[q])&&f.name?" + "==f.name?"ra-all-links":-1!=f.name.indexOf("-")?"ra-sub-links":"ra-links":"","string"!==typeof f?(p=e(f.name,null,r).attr("data-urls",JSON.stringify(f.urls)).attr("data-labels",JSON.stringify(f.labels||null)).attr("class",u),f.blockIds&&p.attr("data-blockids",JSON.stringify(f.blockIds)),p.click(function(b){b={method:"open-urls",
className:$(this).attr("class"),urls:JSON.parse($(this).attr("data-urls")),labels:JSON.parse($(this).attr("data-labels")),inNewWindow:b.shiftKey,isAdditive:b.altKey};var c=$(this).attr("data-blockids");c&&(b.blockIds=JSON.parse(c));l.postMessage(b);a.validate&&a.validate()})):r.append('<span style="padding-right:4px">'+f+"</span>");p=e("\u2715",null,r).attr("class","ra-close-links").css("margin-left","2px").hide().click(function(){l.postMessage({method:"close-worker-tabs"});return!1});v.append(r)}}return!0}catch(K){console.error("Error in renderRaterbar: "+
K.message)}return!1}function P(){chrome.storage.local.get(U,function(a){L=!!a[U];ba()})}function Oa(){if($("#action_action_annotation_div").length){var a;$("td").each(function(){if("#eeeeee"==$(this).attr("bgcolor"))return a=$(this).text(),!1});if(a)return $(document.body).on("mousedown","td.default",function(a){"INPUT"!=a.target.tagName&&$(this).find("input").eq(0).click()}),{type:"APAs",query:a}}else if($('input[name="requireDetailedSelect"]').length&&$('input[name="requireAnswerUrl"]').length&&
($(".query").each(function(){if(-1!=$(this).text().indexOf("["))return a=D($(this).text().match(/\[(.*?)\]/)[0]),!1}),a))return $(document.body).on("mousedown","td.default",function(a){"INPUT"!=a.target.tagName&&$(this).find("input").eq(0).click()}),{type:"APAs",query:a};return null}function Pa(){if($('span:contains("relevance of the app to the concept")').length){var a=$('div:contains("Concept: ")').find("b").eq(0).text().trim();if(!a)return null;var b={left:[],right:[]},c={left:[],right:[]};$(".ewok-editor-editable-column a").each(function(a){$(this).parent().text().match(/\d+./)&&
(b.left.push($(this).attr("href")),c.left.push("L"+(a+1)))});return{type:"app concepts",query:a,links:y(b,c)}}}function Qa(){if($('input[name="ratingLive"]').length&&$('input[name="ratingCached"]').length){var a=$('a:contains("Show Live")').eq(0).attr("href"),b=$('a:contains("Show Cache")').eq(0).attr("href"),c=[a,b],g=["Live","Cache"];if(a&&b)return{type:"bad page rating",urls:c,labels:g,auto:!0}}}function Ra(a){if(!$("#sxs-table").length)return null;try{var b={left:[],right:[]},c={left:[],right:[]},
g={left:[],right:[]},k=h=$(".sxs-side, .sxs-single"),h,e=2<k.length?2:0;h=k.eq(e).find(".rendered-db");h.length||(h=k.eq(e).find(".result"));h.each(function(a){var d=$(this).find("a.titleLink, a.l").eq(0).attr("href")||Q($(this).find("iframe").eq(0))||$(this).find("span.title a").eq(0).attr("href"),f=$(this).find('a:contains("Landing Page")').eq(0).attr("href");f&&(d=f);d&&(b.left.push(d),c.left.push("L"+(a+1)),g.left.push("left.result."+a),$(this).off("mouseenter",E).on("mouseenter",E),$(this).off("mouseleave",
F).on("mouseleave",F))});var m=2<k.length?3:1;h=k.eq(m).find(".rendered-db");h.length||(h=k.eq(m).find(".result"));h.each(function(a){var d=$(this).find("a.titleLink, a.l").eq(0).attr("href")||Q($(this).find("iframe").eq(0))||$(this).find("span.title a").eq(0).attr("href"),f=$(this).find('a:contains("Landing Page")').eq(0).attr("href");f&&(d=f);d&&(b.right.push(d),c.right.push("R"+(a+1)),g.right.push("right.result."+a),$(this).off("mouseenter",E).on("mouseenter",E),$(this).off("mouseleave",F).on("mouseleave",
F))});N&&!a&&($(document).unbind("mouseup",G).bind("mouseup",G),G());var w={type:"block utility",links:y(b,c,g)},x=$(".ewok-task-query, .query-info-query strong").eq(0),d=D(x.text());d&&(w.query=d);return w}catch(n){console.error("Error in parseBU: "+n.message)}return null}function Sa(a){if(!$(".ewok-buds-card").length)return null;var b=$(".ewok-buds-query").eq(0).text().trim();if(!b){var c=$("h2#editable-4").text().trim();c&&(b=c)}if(!b)return null;var c=null,g=$("#ewok-plus-query").html();g&&(g=
/>User Location: ([^<]+)/.exec(g))&&(c=g[1]);var k={left:[],right:[],inputs:[]},h={left:[],right:[]},e={left:[],right:[]},g=$(".ewok-buds-side.ewok-buds-column-0 .ewok-buds-result-html");g.length||1==$(".ewok-buds-side").length&&(g=$(".ewok-buds-side .ewok-buds-result-html"));g.each(function(a){var b=R($(this).find("a"));if(b=b&&b.attr("href")||Q($(this).find("iframe").eq(0)))k.left.push(ta(b)),h.left.push("L"+(a+1)),(a=$(this).closest(".ewok-buds-result").attr("id"))&&e.left.push(a)});$(".ewok-buds-side.ewok-buds-column-1 .ewok-buds-result-html").each(function(a){var b=
R($(this).find("a"));if(b=b&&b.attr("href")||Q($(this).find("iframe").eq(0)))k.right.push(ta(b)),h.right.push("R"+(a+1)),(a=$(this).closest(".ewok-buds-result").attr("id"))&&e.right.push(a)});N&&!a&&($(document).unbind("mouseup",G).bind("mouseup",G),G());if($('a:contains("Local")').length||$('a:contains("Maps")').length)$.each(k.left,function(a,b){k.left[a]=C(b)}),$.each(k.right,function(a,b){k.right[a]=C(b)});var m=null;$("div#ewok-plus-query div").each(function(){var a=/User Location: (.+)/.exec($(this).text());
if(a)return m=a[1],!1});a||(ma?($("div.ewok-buds-contextual-side").hide(),$("div#wa-instructions-header").is(".goog-zippy-expanded")&&$("div#wa-instructions-header").click()):$("div.ewok-buds-contextual-side").show());a={type:"buds",query:b,links:y(k,h,e)};m&&(a.location=m);$('p:contains("None of the result blocks in this task will have clickable links")').length&&(a.links=[]);c&&(a.location=c);return a}function Ta(){}function Ua(a){if($('span:contains("candidate answer")').length){var b=D($('div:contains("Query: [")').last().text());
if(!b)return null;b={type:"candidate queries",query:b};a||setTimeout(function(){var a=$('input[name="show_examples"]');a.prop("checked")||a.click()},200);N&&!a&&($(document).unbind("mouseup",G).bind("mouseup",G),G());return b}}function Va(){if($("#nonsenseGarbled_question").length&&$(".zebraStripedTable").length){var a=D($("td.query:last-child").text());if(a)return{type:"cats",query:a}}else if($("#AddCalendarEvent-Attendees-exists-table").length){if(a=D($("#query-text b").eq(0).text()))return{type:"cats",
query:a}}else if($(".query-standalone").length&&(a=D($(".query-standalone a").eq(0).text())))return $(document.body).on("mousedown","td.default",function(a){"INPUT"!=a.target.tagName&&$(this).find("input").eq(0).click()}),{type:"apa cats",query:a};return null}function Wa(){if(!($("#prevQueryClicked").length||$("#prevURLClicked").length||$("div.boxed").length||$('input[name="alreadyComplete"]').length))return null;var a={left:[],right:[]},b={left:[],right:[]},c={left:[],right:[]};$("#results-table tr").each(function(){var g=
$(this).find("td.suggestion_link"),h=g.eq("0").find("a").attr("href"),e=g.eq("1").find("a").attr("href");h&&(a.left.push(h),b.left.push("L"+(1+b.left.length)),c.left.push("left.result."+c.left.length),g.eq("0").off("mouseenter",E).on("mouseenter",E),g.eq("0").off("mouseleave",F).on("mouseleave",F));e&&(a.right.push(e),b.right.push("R"+(1+b.right.length)),c.right.push("right.result."+c.right.length),g.eq("1").off("mouseenter",E).on("mouseenter",E),g.eq("1").off("mouseleave",F).on("mouseleave",F))});
var g=D($('span:contains("Query")').last().closest("tr").find("a").text().replace("^",""));g||(g=D($("div.boxed").last().text().replace("^","")));return{type:"completions",query:g,links:y(a,b,c),validate:function(){var a=$("#hiddenSection").find("input").prop("checked",!0);console.log("Marked "+a.length+" links(s) as clicked")}}}function Xa(){var a=!!$("#editable-4-zippy-experimental-list-answers-vr-tuning-2-template-jhtml").length,b=!!$('label:contains("Worth watching")').length;if(!$(".suggestionCell").length&&
!a&&!b)return null;var c=$('th:contains("User\'s Query"), th:contains("Entity")').closest("tr").find("a").eq(0).text().trim();a&&(c=$("#editable-20").find("a").eq(0).text().trim());if(!c)return null;var g={left:[],right:[]},k={left:[],right:[]},h={left:[],right:[]};b?$("#q_worth tr").each(function(){var a=$(this).find("a").eq(0).attr("href");if(a){var b=g.left.length;g.left.push(a);k.left.push("L"+(1+b));h.left.push("left.result."+b)}}):a?$("#editable-25").find("tr").each(function(){var a=$(this).find("td").eq(0).find("a").eq(0).attr("href");
a&&(blocksIds.left.push("left.result."+g.left.length),g.left.push(a),k.left.push("L"+g.left.length))}):($(".suggestionCell:first-child").each(function(a){var b=$(this).find("a").attr("href");b&&(g.left.push(b),k.left.push("L"+(a+1)),h.left.push("left.result."+a))}),$(".suggestionCell:last-child").each(function(a){var b=$(this).find("a").attr("href");b&&(g.right.push(b),k.right.push("R"+(a+1)),h.right.push("right.result."+a))}),$(".suggestionCell:first-child").off("mouseenter",E).on("mouseenter",E),
$(".suggestionCell:first-child").off("mouseleave",F).on("mouseleave",F),$(".suggestionCell:last-child").off("mouseenter",E).on("mouseenter",E),$(".suggestionCell:last-child").off("mouseleave",F).on("mouseleave",F));return{type:"entity lists",query:D(c),links:y(g,k,h)}}function Ya(){if($(".event-details-section").length){var a=$("#editable-156 a").eq(0).attr("href");if(a)return{type:"event listings",links:[{name:"Links",urls:[a],labels:["L1"]}],auto:!0}}}function Za(){if($('input[value="Probably Already Discovered"]').length){var a=
{left:[],right:[]},b={left:[],right:[]};$('th:contains("Side A")').eq(0).closest("table").find("tr").each(function(){var c=$(this).find("a").eq(0).attr("href"),g=$(this).find("a").eq(1).attr("href");c&&(a.left.push(c),b.left.push("A"+a.left.length));g&&(a.right.push(g),b.right.push("B"+a.right.length))});if(a.left.length||a.right.length)return{type:"future queries",links:y(a,b)}}}function $a(){if($("#dontknow-box").length&&$('input[name="topicality"]').length)return{type:"google alerts",query:D($('th:contains("Alert Query")').eq(0).next().text())}}
function ab(){if($('#editable-text1:contains("Hubpage 1"), #editable-text1:contains("Page 1")').length){var a=[];$("div").each(function(){/(Hubpage|Page)\s\d+:/.exec($(this).text())&&1==$(this).find("a").length&&a.push($(this).find("a").eq(0).attr("href"))});if(a.length){var b=[];$.each(a,function(a){b.push("L"+(a+1))});Ea({urls:a,labels:b});return{type:"hubpages",urls:a,labels:b}}}return null}function bb(){if(!$("#imageFlagsContents, span#dupe_seeking_wrapper, div#fresh-seeking-container").length)return null;
try{var a={left:[],right:[]},b={left:[],right:[]},c=[];$(".sxs-side").eq(0).find(".large-data").each(function(g){var h=$(this).find("a").eq(0).attr("href");h&&(a.left.push(h),b.left.push("L"+(g+1)),c.push("left.result."+g))});$(".sxs-side").eq(1).find(".large-data").each(function(g){var h=$(this).find("a").eq(0).attr("href");h&&(a.right.push(h),b.right.push("R"+(g+1)),c.push("right.result."+g))});var g={left:[],right:[]},k={left:[],right:[]};$(".sxs-side").eq(0).find(".large-image").each(function(a){var b=
$(this).find("a").eq(0).attr("href");b&&(g.left.push(b),k.left.push("L"+(a+1)))});$(".sxs-side").eq(1).find(".large-image").each(function(a){var b=$(this).find("a").eq(0).attr("href");b&&(g.right.push(b),k.right.push("R"+(a+1)))});var h=[y(g,k),y(a,b)];T=!1;var h={type:"image BU",links:h},e=$(".query-info strong").eq(0).text();h.query=D(e);return h}catch(m){console.error("Error in parseImageBU: "+m.message)}return null}function cb(){if($("#display_on_entity_page_click").length){var a=$('h3:contains("Entity Name")');
if(a.length&&(a=a.find("b").text(),a.length)){var a={type:"image entities",query:a},b=$('h3:contains("Entity Page:") a').first(),c=$('h2:contains("IMAGE LANDING PAGE") a').first();b.length&&c.length&&(a.auto=!0,a.links=[{name:"Links",urls:[b.attr("href"),c.attr("href")]}],a.validate=function(){b.get(0).click()});return a}}}function db(){if(-1==$("#ewok-instructions-container").text().indexOf("on each side you will see a collection of image results"))return null;var a=$(".ewok-task-query").eq(0).text();
return a?{type:"image sxs",query:a,links:[]}:null}function eb(){if($('input[name="indepth1"]').length){var a=/\[(.*?)\]/.exec($('span:contains("Query")').text()),a=a&&a[1];if(!a)return null;var b=[],c=[];$("#url_table a").each(function(a){var k=$(this).attr("href");k&&(b.push(k),c.push("L"+(a+1)))});return b.length?{type:"indepths",query:a,links:[{name:"Articles",urls:b,labels:c}]}:null}if($('input[name="Indepth"]').length&&(a=$("span#docs-internal-guid-3359dde3-ea3a-9b61-fd91-feb74bf4e984 a").attr("href")))return{type:"indepths single",
links:[{name:"Article",urls:[a]}]}}function fb(){if($('p:contains("Tell us which side has a better collection of cards")').length){for(var a=$('p:contains("looking for a place to have") b').eq(1).text(),b=[],c=[],g=[],k=[],h=0;12>h;h++){var e=$("#"+h+"left");if(e=e.find("a").eq(0).attr("href"))g.push("L"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[b.length]),b.push(e);e=$("#"+h+"right");if(e=e.find("a").eq(0).attr("href"))k.push("R"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[c.length]),c.push(e)}if(b.length&&c.length)return a=
{type:"local cards",query:a,links:[]},a.links.push({name:"List 1",urls:b,labels:g}),a.links.push({name:"List 2",urls:c,labels:k}),a}return null}function gb(){if($("table.prediction_list").length&&$("div#is_address_radio").length){var a={left:[],right:[]},b={left:[],right:[]};$("table.prediction_list tr").each(function(){var c=$(this).find("td").eq(0).find("a").eq(0).attr("href"),k=$(this).find("td").eq(1).find("a").eq(0).attr("href");c&&(b.left.push("L"+(1+b.left.length)),a.left.push(c));k&&(b.right.push("R"+
(1+b.right.length)),a.right.push(k))});var c=D($("span.prefix").eq(0).text());if(a.left.length||a.right.length)return{type:"local prediction lists",query:c,links:y(a,b),validate:function(){$('input[name="LinkCheck"]').prop("checked",!0)}}}}function hb(a){if(!$("#query-classification").length)return null;try{var b={left:[],right:[],inputs:[]},c={left:[],right:[]},g=$(".result-left");g.length||(g=$(".result_list_box").eq(0).find(".result"));var k=ea();g.each(function(a){var d;$(this).find("a").each(function(){"_blank"==
$(this).attr("target")&&$(this).attr("href")&&(d=$(this).attr("href"))});d&&(k?(b.right.push(d),c.right.push("R"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a))):(b.left.push(d),c.left.push("L"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a))),a=$(this).find("input:hidden:first-child"),a.length&&b.inputs.push(a))});g=$(".result-right");g.length||(g=$(".result_list_box").eq(1).find(".result"));g.each(function(a){var d;$(this).find("a").each(function(){"_blank"==$(this).attr("target")&&$(this).attr("href")&&(d=$(this).attr("href"))});
d&&(k?(b.left.push(C(d)),c.left.push("L"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a))):(b.right.push(C(d)),c.right.push("R"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a))),a=$(this).find("input:hidden:first-child"),a.length&&b.inputs.push(a))});var h={type:"sxs local",links:y(b,c)},e=$(".search_box td").text()||$(".ewok-task-query").eq(0).text();e&&(h.query=e);var m=$(".user_location").text().trim();m||(m=$('span:contains("User Location: ")').parent().find("strong").eq(0).text());m&&(h.location=m);h.validate=
function(){for(var a=b.inputs,c=0,g=0;g<a.length;g++)"true"!=$(a[g]).val()&&($(a[g]).val("true"),c++);console.log("Marked "+c+" links(s) as clicked")};N&&!a&&($(document).unbind("mouseup",G).bind("mouseup",G),G());return h}catch(l){console.error("Error in parseLocalSxS: "+l.message)}return null}function ib(){if($("#hidden-slider-utility-expt1").length&&$("#hidden-slider-utility-base1").length){var a=$("iframe").eq(0).contents(),b=$("iframe").eq(1).contents();if(window.ra_async){var c={left:[],right:[]},
g={left:[],right:[]};a.find("div.esc-default-layout-wrapper").each(function(a){var b=$(this).find("a").eq(0);b&&b.attr("href")&&(c.left.push(b.attr("href")),g.left.push("L"+(1+a)))});b.find("div.esc-default-layout-wrapper").each(function(a){var b=$(this).find("a").eq(0);b&&b.attr("href")&&(c.right.push(b.attr("href")),g.right.push("R"+(1+a)))});return{type:"news & blogs",query:D($("#editable-5").find("b").eq(0).text()),links:y(c,g)}}a.ready(function(){b.ready(function(){setTimeout(ba,1E3)})});window.ra_async=
!0;return null}}function jb(){var a=$('#ewok-task-container div:contains("Webpage:") > a, \t\t#ewok-task-container div:contains("webpage:") > a, \t\t#ewok-task-container div:contains("Original URL:") > a, \t\t#ewok-task-container div:contains("Source URL:") > a, \t\t#ewok-task-container div:contains("Landing page:") > a, \t\t#ewok-task-container div:contains("Entity:") > a, \t\t#ewok-task-container div:contains("URL:") > a');if(a.length){var b=[],c=[];a.each(function(a){if(a=$(this).attr("href"))b.push(a),
c.push("L"+b.length)});if(b.length)return{type:"other",links:[{name:"Links",urls:b,labels:c}],auto:!0}}else $('a:contains("Rating URL")').length&&(b=[],$('a:contains("Rating URL")').each(function(){$(this).attr("href")&&b.push($(this).attr("href"))}),b.length&&Ea({urls:b}))}function kb(){if($('li:contains("which of the two sets is better overall in describing the webpage")')){var a=$('div:contains("Webpage: ")').last().find("a").eq(0).attr("href");if(a)return{type:"page descriptions",links:[{name:"Links",
urls:[a],labels:["L1"]}],auto:!0}}}function lb(){if($("#pq-overall-slider").length&&$("#pq-comment").length){var a=$("div.pq-task-main-info a").eq(0).attr("href");a||(a=$("div.pq-task-main-info a").first().attr("data-oldhref"));if(a){var b=document.createElement("a");b.href=C(a);return{type:"page quality",links:[{name:"Links",urls:[a,b.protocol+"//"+b.host],labels:["L1","L2"]}]}}}}function mb(){if($('input[name="browseContext"]').length&&$('input[name="currentBroken"]').length){var a=D($('th:contains("Current Query:")').eq(0).next().find("b:first-child").text()),
b=$('th:contains("Current Page")').eq(0).next().find("a").eq(0).attr("href");return a&&b?{type:"PCQ",query:a,links:[{name:"Links",urls:[b],labels:["L1"]}],auto:!0}:null}}function nb(){if($('p:contains("Given an original query and a substitute query")').length){var a=D($(".original-query").eq(0).text().replace("Query:",""));if(a)return{type:"query subs",query:a}}return null}function ob(){if($("#q_util").length&&$('input[name="interesting1"]').length){var a=[];$('th:contains("Related Entity")').closest("tbody").find("tr").each(function(){var b=
$(this).find("td:first-child a").eq(0).attr("href");b&&a.push(b)});var b=D($('th:contains("Original Query")').closest("tr").find("a").text()),b={type:"related entities",query:b,links:[{name:"Entities",urls:a}]};6<a.length&&(b.links.push({name:"1-5",urls:a.slice(0,5)}),b.links.push({name:"6-"+a.length,urls:a.slice(5,a.length)}));return b}if($(".refinementNum").length&&$('input[name="Ainteresting1"]').length){var a={left:[],right:[]},c={left:[],right:[]},b=$('th:contains("entities"), th:contains("Lists of")').closest("tr").find("table");
b.find("td:first-child").each(function(){var b=$(this).find("a").eq(0).attr("href");b&&(a.left.push(b),c.left.push("L"+a.left.length))});b.find("td:last-child").each(function(){var b=$(this).find("a").eq(0).attr("href");b&&(a.right.push(b),c.right.push("R"+a.right.length))});b=D($('th:contains("Original Entity"), th:contains("Original Query"), th:Contains("Main Artist")').closest("tr").find("a").text());return b={type:"sxs related entities",query:b,links:y(a,c)}}return null}function pb(){if(!$("table.rr-item-table").length||
!$('div:contains("Book Search results")').length)return null;var a,b;$("table.rr-item-table td").each(function(){a||-1==$(this).text().indexOf("Query")?-1!=$(this).text().indexOf("URL")&&(b=$(this).next().find("a").eq(0).attr("href")):a=$(this).next().text()});return b?{type:"rr book",query:a,links:[{name:"LP (auto)",urls:[b]}],auto:!0}:null}function qb(){if(!$("table.rr-item-table").length)return null;var a,b,c;$("table.rr-item-table td").each(function(){b||-1==$(this).text().indexOf("Query")?-1!=
$(this).text().indexOf("Url")?a=$(this).next().find("a").eq(0).attr("href"):!c&&$(this).find("img").length&&(c=$(this).find("img").eq(0).parent().attr("href"),c=decodeURIComponent(Ka(c.slice(5)))):b=$(this).next().text()});if(!a)return null;var g={type:"rr image",query:b,links:[{name:"LP (auto)",urls:[a]}]};c&&(g.imgUrl=c);g.auto=!0;return g}function rb(){if(!$('span:contains("Video Search Quality Rating Scale")').length)return null;var a,b;$("table.rr-item-table td").each(function(){b||-1==$(this).text().indexOf("Query")?
-1!=$(this).text().indexOf("URL")&&(a=$(this).next().find("a").eq(0).attr("href")):b=$(this).next().text()});return a?{type:"rr video",query:b,links:[{name:"LP (auto)",urls:[a]}],auto:!0}:null}function sb(){if($('input[name="SafeSearch3"]').length&&$('input[name="PornContent_Ad"]').length){var a=$(".label-text a").eq(0).attr("href");return a?{type:"safesearch",links:[{name:"Links",urls:[a],labels:["L1"]}],auto:!0}:null}}function tb(){if(!$(".ewok-sxs-stars").length)return null;var a={left:[],right:[]},
b={left:[],right:[]},c=ea();$(".ewok-sxs-side-left .ewok-sxs-html").each(function(g){var h=Q($(this).find("iframe").eq(0));h&&((c?a.right:a.left).push(h),(c?b.right:b.left).push((c?"R":"L")+(g+1)))});$(".ewok-sxs-side-right .ewok-sxs-html").each(function(g){var h=Q($(this).find("iframe").eq(0));h&&((c?a.left:a.right).push(h),(c?b.left:b.right).push((c?"L":"R")+(g+1)))});a.left.length||$(".ewok-sxs-side-left .ewok-sxs-block-outer tr").each(function(g){$(this).find("td").each(function(){if(!$(this).find("img").length){var b=
$(this).find("a").eq(0).attr("href");if(b)return(c?a.right:a.left).push(b),!1}});(c?b.right:b.left).push("L"+(g+1))});a.right.length||$(".ewok-sxs-side-right .ewok-sxs-block-outer tr").each(function(g){$(this).find("td").each(function(){if(!$(this).find("img").length){var b=$(this).find("a").eq(0).attr("href");if(b)return(c?a.left:a.right).push(b),!1}});(c?b.left:b.right).push("R"+(g+1))});var g=$(".ewok-task-query").eq(0).text();return g?{type:"search product",query:g,links:y(a,b)}:null}function ub(){if($("#another_author").length&&
$(".ShareInsignificant").length){var a=$(".page_choice h3 a");if(2==a.length){var b=[];a.each(function(){b.push($(this).attr("href"))});return{type:"shareagraphs",urls:b,labels:["L1","L2"],auto:!0}}}}function vb(){if(!$("#bu-sim-header").length)return null;var a={left:[],right:[]},b={left:[],right:[]},c=0,g=0,e={left:[],right:[]};$(".bu-sim-html").each(function(h){h=100>$(this).position().left;if(!$(this).closest("tr").prev("tr").find(".sliders-noscore-overlay").length){var t=$(this).find("a.titleLink, a.l").eq(0).attr("href")||
Q($(this).find("iframe").eq(0))||$(this).find("a").eq(0).attr("href");t&&0==t.indexOf("http://www.google.com/local/add")&&(t="");t&&(h?(a.left.push(C(t)),b.left.push("L"+(1+c)),e.left.push("left.result."+c)):(a.right.push(C(t)),b.right.push("R"+(1+g)),e.right.push("right.result."+g)))}h?c++:g++});return{type:"simulator",query:$("#bu-sim-header b").eq(0).text(),links:y(a,b,e)}}function wb(){if($("td.common_headlines a").length){var a={left:[],right:[]},b={left:[],right:[]},c={left:[],right:[]};$("td.common_headlines a").each(function(g){3>
g?(c.left.push("left.result."+a.left.length),a.left.push($(this).attr("href")),b.left.push("L"+a.left.length)):(c.right.push("right.result."+a.right.length),a.right.push($(this).attr("href")),b.right.push("R"+a.right.length))});T=!1;return{type:"snapshots",links:y(a,b,c)}}}function xb(){if(!$(".embedded_date").length)return null;var a={left:[],right:[]},b={left:[],right:[]};$(".result a").each(function(c){a.left.push($(this).attr("href"));b.left.push("L"+(c+1))});var c=$(".query").eq(0).text();return c?
{type:"stales",query:c,links:y(a,b)}:null}function yb(){if(!$("#docs-internal-guid-3359dde3-ea39-af9f-2733-e94c9e1249a5").length)return null;var a=$(".ewok-editor-editable-column").eq(0).find("iframe").eq(0).contents(),b=$(".ewok-editor-editable-column").eq(1).find("iframe").eq(0).contents();if(window.ra_async){var c={left:[],right:[]},g={left:[],right:[]};a.find("li.g").each(function(a){var b=R($(this).find("a"));b&&b.attr("href")&&(c.left.push(b.attr("href")),g.left.push("L"+(1+a)))});b.find("li.g").each(function(a){var b=
R($(this).find("a"));b&&b.attr("href")&&(c.right.push(b.attr("href")),g.right.push("R"+(1+a)))});return{type:"sxs indepths",query:D($('span:contains("Query:")').eq(1).next().text()),links:y(c,g)}}a.ready(function(){b.ready(function(){setTimeout(ba,1E3)})});window.ra_async=!0;return null}function zb(){if($('p:contains("How likely is it that this user would be interested in the target landing pages below")').length){var a=[];$('th:contains("Possibly Related Links")').closest("table").find("td a:first-child").each(function(){a.push($(this).attr("href"))});
if(a.length){var b=[];$.each(a,function(a){b.push("L"+a)});return{type:"target lps",urls:a,labels:b}}}return null}function Ab(){if(!$('input[name="targetflag1"]').length)return null;for(var a=[],b=[],c=[],g=[],e=[],h=0;12>h;h++){var t=$('td[name="right.result.'+h+'"]').eq(0);if(t.length){var m=t.find("table td:nth-child(2) a").eq(0).attr("href");m&&(g.push("R"+(h+1)),b.push(m),(t=t.find("input").eq(0))&&e.push(t))}}for(h=0;12>h;h++)if(t=$('td[name="left.result.'+h+'"]').eq(0),t.length&&(m=t.find("table td:nth-child(2) a").eq(0).attr("href")))c.push("L"+
(h+1)),a.push(m),(t=t.find("input").eq(0))&&e.push(t);if(!a.length&&!b.length)return null;h={type:"target videos",links:[]};a.length&&h.links.push({name:"Left",urls:a,labels:c});b.length&&h.links.push({name:"Right",urls:b,labels:g});Ja(h.links);if(a=$('a:contains("clicking on this hyperlink")').eq(0).attr("href"))h.url=a;h.validate=function(){for(var a=0,b=0;b<e.length;b++)"true"!=$(e[b]).val()&&($(e[b]).val("true"),a++);console.log("Marked "+a+" links(s) as clicked")};return h}function Bb(){if($("span#docs-internal-guid-a473f455-5e6d-8e92-b958-c94e971c3b9e").length){var a=
D($("#editable-5").find("b").eq(0).text());if(!a)return null;var b={left:[],right:[]},c={left:[],right:[]};$("#editable-6 tr").each(function(){var a=$(this).find("td").eq(0).find("a").eq(0).attr("href");a&&(b.left.push(a),c.left.push("L"+b.left.length));if(a=$(this).find("td").eq(1).find("a").eq(0).attr("href"))b.right.push(a),c.right.push("R"+b.right.length)});if(b.left.length||b.right.length)return{type:"thumbnail pages",query:a,links:y(b,c)}}}function Cb(){if($('b:contains("shelves")').length){var a=
$(".ewok-task-query, .query-info-query strong").eq(0),a=D(a.text()),b={left:[],right:[]},c={left:[],right:[]},g={left:[],right:[]};$("div.ewok-buds-card div.sxs-table").each(function(){$(this).find("div.sxs-side").eq(0).find("div.result").each(function(){var a=$(this).find("a");if(a=a.length&&a.eq(0).attr("href")||null)g.left.push("left.result."+b.left.length),b.left.push(a),c.left.push("L"+b.left.length)});$(this).find("div.sxs-side").eq(1).find("div.result").each(function(){var a=$(this).find("a");
if(a=a.length&&a.eq(0).attr("href")||null)g.right.push("right.result."+b.right.length),b.right.push(a),c.right.push("R"+b.right.length)})});return{type:"youtube shelves",query:a,links:y(b,c,g)}}}function ba(){chrome.storage.local.get("auto-open-results auto-open-results-mode close-s2d-dialog focus-on-hover hide-contextual-results maps-links-mode open-links-separately open-right-to-left highlight-live-results quarter-tick-warning send-to-device sonora-auto-focus sonora-auto-open task-features-enabled use-separate-window user-locale".split(" "),
function(a){T=!!a["auto-open-results"];na=a["auto-open-results-mode"]||"left";oa=!!a["close-s2d-dialog"];O=!1!==a["task-features-enabled"];ka=!!a["focus-on-hover"];ma=!1;Fa=a["maps-links-mode"]||0;la=!!a["open-links-separately"];Y=!!a["open-right-to-left"];pa=!1!==a["highlight-live-results"];N=!!a["quarter-tick-warning"];W=!1!==a["send-to-device"];aa=!!a["use-separate-window"];B=a["user-locale"]||null;if(Ca){var b=$("table.task_table");if(b.length&&(b=b.find("a").first(),b.length)){var c=function(){l.postMessage({method:"open-urls",
className:"ra-links",urls:[g],labels:["L1"],focus:$("#ra-autofocus").is(":checked")})},g=b.attr("href");b.on("click",function(){I()&&l.postMessage({method:"will-open-task-link",url:C(g),type:"sonora"})});$("#ra-footer").remove();$("#task-form").parent().append('<table id="ra-footer" style="margin-top:36px; -webkit-user-select:none; cursor:default"><tr><td><img id="ra-icon" border="0" style="width:19px; height:19px"></img></td><td></td><td></td><td>Auto:</td><td></td><td><input id="ra-autoopen" type="checkbox" style="margin:0" /></td><td><label for="ra-autoopen">Open</label></td><td></td><td></td><td><input id="ra-autofocus" type="checkbox" style="margin:0" /></td><td><label for="ra-autofocus">Focus</label></td></tr></table>');
$("#ra-icon").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2tpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNCRkIwQUQzODkwNDExRTU4QTQ1OUZDNDhEMjQxNkVBIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNCRkIwQUQyODkwNDExRTU4QTQ1OUZDNDhEMjQxNkVBIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzMgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InV1aWQ6MzkwMUQ4RjIwRTM2RTMxMTgzMERDMzdBOTk3NUNGQjYiIHN0UmVmOmRvY3VtZW50SUQ9InV1aWQ6QUNCOTE1OUJFRTM0RTMxMTgzMERDMzdBOTk3NUNGQjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ltktoAAAFGklEQVR42sRYbUxTZxR+bntbbqGUUmzL+CpYqIhLMLBEgjMDXbJlis5kWzBLtrg4FeeWzGTbX7dlP0y2H/vUJYv8cY5EIh8zzG1h4j6ROIPARHCrFWXYlvLRUvp1b7u3JboAb3tv+dA3Obftveee93mf95z3nFMGX0awpPHnGQ4pahOUqXryqYdSlQ4wMoR8HgRmxhH0OcEHRlC+cyahnQMM9TaLyBKADXTUIjN/OzSGWqSkZ4NTa8FyHBiGQcgfQNA7Bb/HAY+zG3993w6/+0dUPBdMZgoGxwVpmleaVdAYj8BoeRWabFNSC/G67LAPfwOX7QM8Vj8+71mDfBnAhi40IK/8KNJ0Bixn+N3TuHP1IxRveV8c2Bd8fEOXTqXBVNmK7PVPYiWHy9ZLAO5G+S4bDrFxfCwcpr/c12aBpaYD2lzzkvww0dCZNoLT9KD/3B7yq5OmIotNulB6W0qxtvoCMnLM1OcrISqtHiU1rTjYso2+lZ/4FxwDTRpYanuJgxclWvTe9TK8UyFPSMyxKwIaB8NifjdJfLgKX70wnPi4yNt4FunGIrHtM6iAdZmMqI6oG6SkZ6Kgsp18K52/lVEfuydDP70GvWXbvHtxhBfE/S6mI8EWNI+sw5sXP6f7WM8pDvkV70n2EalDqr3c8n14palwMWO6wregVOskrfCeiI1kbDFyJbT5x+Yz1t2ogL7kYFJRtdKMRcVQUoe9Tcb/GUs3bkaqLieZFQZ5ccZiOsmwJlOqoFDtmIvKvlYOGbl1tK0pN8ihYumRV6yViQKL6lRl0/V8fARXHZR0qDbW4+XT51koUguh1tfStufsbjXWSgAQb7xRmRIT2rBOhWE+MbX4QWpmKdypJpaUK2sIuGwaY3x4hVPRQtu0AJJzGWQ7swhjKgNYVQZNKbJ6uOZs04DJWA7yFDVLLulgyA9q+K8iMsRhjCCLRkE0JRHvJrKa9MTFFo53n2FJKexFKBCAXMk9aMJA8+GIIEAQQiz8M05Sn09Dlck9cMZoW8kTkkI+b7SrcSLgHacdeGkKZtUwxWzTDln/DOmyvBPRrbwFj+MPqLM3LHz53PVZ5GroNZc5S4EygyLh5NccIfzjClGfjboFOmOzk1bS/t1mYd46A+vPLcT59y3UaWhxxp30cLUGn+5ckxDY8e5pfPa7OzkqPfYzGOuzzRWK3vGL8E1PkKJNJ/X9FJlEHSlVyH2fE0LwTbXi148jc0m8bJcX4ze+TirhSjleIpHkkviEtQuth2zzC0X32FESCDMPrewJ8wJc1rcXF4olT03g7sCHD61QdAy1oP1wL719y6l4F+7RASkrZGXiR0lMRwpbsxN3MWl7KXHDa79WB4X6MimzsxJN6vCEMOQIQExHlFkhFMBY7x50HPHN7ytf71+sfLOrBnmbviUlkXqVcyWPOz370ba/UVonXvhEF0YvP4uAx7VqnTjv9+P2pQM0UPGBRaVgcyd5sRqescEVBzU78S9Guncgv+pkPDJlCSOlqHYYacYy2PtPkOTqWzYggQ/Beb0ZI79ZYNrSmcj/ZJIM6jc04NYvj8I5eDqps+4+oGAArr/PExubkGV5HiXPeMXOQ1ayoxZttZLri7jxnZGUSNuRqq8Hpy0lAaIlVTAHWbTyjFYMpJ4Kk0jj/dMITFtJumtG0NNG2LdBZ5Y8XfL/wRY/bSfXk2T1P8A3mR9rZuQKNWQKZew/2DAfhBDwEmAuwu4oCh6/uZQG4j8BBgB3d4X2aGNS/wAAAABJRU5ErkJggg==");
b={type:"sonora",links:[{name:"Links",urls:[g],labels:["L1"]}],auto:!0};l.postMessage({method:"did-render-features",data:b});$("#ra-autoopen").prop("checked",!!a["sonora-auto-open"]);$("#ra-autoopen").change(function(){I()&&(chrome.storage.local.set({"sonora-auto-open":$(this).prop("checked")}),$(this).prop("checked")&&c())});$("#ra-autofocus").prop("checked",!!a["sonora-auto-focus"]);$("#ra-autofocus").change(function(){I()&&chrome.storage.local.set({"sonora-auto-focus":$(this).prop("checked")})});
b=!!$("ol#errors").text().trim().length;$("#ra-autoopen").prop("checked")&&!b&&c();ya()}}else{a=[bb,Cb,Ra,hb,Sa,rb,qb,tb,xb,Ab,vb,db,Xa,eb,Wa,ob,Va,zb,ab,Oa,fb,nb,yb,$a,Qa,Pa,Ua,Ta,pb,wb,mb,sb,gb,lb,ub,kb,Bb,ib,Ya,Za,cb,jb];for(var e=!L,h=0;h<a.length&&!(b=a[h](e));h++);b&&!e?(chrome.runtime.sendMessage({method:"got-task-features",info:b}),console.log(b?'Found features for "'+b.type+'"':"No task features"),O&&(Da(b),l.postMessage({method:"did-render-features",data:b}),T&&setTimeout(function(){"both"==
na&&$(".ra-all-links").length?$(".ra-all-links").eq(0).click():"right"==na&&1<$(".ra-links").length?$(".ra-links").eq(1).click():$(".ra-links").eq(0).click()},500))):chrome.runtime.sendMessage({method:"no-task-features"});O&&!e&&(ya(),wa(!0));W&&!ca&&Ga(0,e)}})}function Ha(){Da(null);wa(!1);G();K=null;da();za();S(null)}function R(a){function b(a){return parseInt(a.css("width")||0,10)}function c(a){return-1!=a.indexOf("%2Fimgres%3F")}if(2==a.length&&100==b(a.eq(0)))return a.eq(1);for(var g=[],e=0;e<
a.length;e++)g.push(a.eq(e));g.sort(function(a,b){var e=a.attr("href")||a.attr("data-oldhref")||a.attr("oldhref")||"",k=b.attr("href")||b.attr("data-oldhref")||b.attr("oldhref")||"";if(c(e)&&!c(k))return 1;if(c(k)&&!c(e))return-1;e="auto"==a.css("top")?0:parseInt(a.css("top")||0,10);k="auto"==b.css("top")?0:parseInt(b.css("top")||0,10);if(e!=k)return e<k?-1:1;e=parseInt(a.css("width")||0,10);k=parseInt(a.css("width")||0,10);if(e!=k)return e<k?-1:1;e=g.indexOf(a);k=g.indexOf(b);return e<k?-1:1});return g.length&&
g[0].eq(0)||null}function Ga(a,b){function c(a){return null!==/google\.com\/\d+$/.exec(a)||"http:"==a||"https:"==a?!1:!0}function e(a,b){return a.index<b.index?-1:1}function k(h){if(h){var k=h.e2q_exp||h.query,w={left:[],right:[]},x=!!$("urlscript:contains('flipped\":true'), script:contains('var flipped = true'), script:contains('\"flipped\":true')").length;$.each(["left","right"],function(a,b){for(var d=0,e=0;24>e;e++){var g=h[b+".result."+e+".type"];g||(g=Ia);var k,n=h[b+".result."+e+".titleHtml"]||
g,m=document.createElement("div");m.innerHTML=n;k=m.textContent;var n=x?"left"==b?"right":"left":b,m="",l=document.getElementById("large-"+n+".result."+e);l||(l=document.getElementById(n+".result."+e));if(l){var r=$(l);r.find("div.evl-slider2-slider, div.utility-slider-bar");if(r.find("div.ewok-buds-inline-contextual-heading:contains('No Rating Required')").is(":visible"))continue;var y=r.find("div.mapsfe-scraper-link a").eq(0);y.length&&0==(Fa||0)?(r=y.attr("data-oldhref")||y.attr("oldhref")||y.attr("oldhref"))&&
c(r)&&(m=r):(y=r.find(".ewok-buds-result-html").eq(0),(y=R(y.find("a")))?(r=y.attr("data-oldhref")||y.attr("oldhref")||y.attr("href"))&&c(r)&&(m=r,Ia==k&&(r=y.text().trim())&&(k=r)):(r=r.find("iframe").first(),r.length?(r=r.attr("src"))&&c(r)&&(m=r,k="VIDEO"):(r=(r=h[b+".result."+e+".imageResult"])&&r.ReferringUrl?r.ReferringUrl:h[b+".result."+e+".url"])&&c(r)&&(m=r,k="Landing Page")))}if(!l&&(l=$("table.details, table#refinements").last().find("tr"),l.length))if(m=l.eq(e),k=m.text(),l=-1!=k.indexOf("[")&&
-1!=k.indexOf("]"),k=m.find("a").first(),k.length&&k.attr("href"))m=k.attr("href"),k=k.text(),l&&(k="["+k+"]");else{d+=1;continue}l=e-d;m&&-1==m.indexOf("answer%2F6229325")&&w[n].push({id:n+".result."+l,index:l,label:("right"==n?"R":"L")+(1+l),title:k,type:g,url:C(m)})}});if(!w.left.length&&!w.right.length)if(h.url||h.resultUrl){var d=C(h.url||h.resultUrl);w.left.push({id:"left.result.0",index:0,label:"L1",title:"Task URL",type:"WEB",url:d});if($("#pq-overall-slider").length){var n=document.createElement("a");
n.href=d;w.left.push({id:"left.result.1",index:1,label:"L2",title:"Task URL",type:"WEB",url:n.protocol+"//"+n.host})}}else if(h.click_target_url1)for(n=1;24>=n;n++)if(d=h["click_target_url"+n])w.left.push({id:"left.result."+(n-1),index:n-1,label:"L"+n,title:"Task URL",type:"WEB",url:C(d)});else break;else if(h.url1)for(n=0;24>=n;n++)(d=h["url"+n])&&w.left.push({id:"left.result."+(n-1),index:n-1,label:"L"+n,title:"Task URL",type:"WEB",url:C(d)});w.left.sort(e);w.right.sort(e);for(n=w.left.length-1;0<=
n;n--)(d=w.left[n])&&d.id&&d.label&&d.title&&d.type&&d.url||w.left.splice(n,1);for(n=w.right.length-1;0<=n;n--)(d=w.right[n])&&d.id&&d.label&&d.title&&d.type&&d.url||w.right.splice(n,1);if(w.left.length||w.right.length){k={acquireTime:ha(),blocks:w,nonce:Date.now(),query:fa(k||" "),taskId:X()};b&&delete k.blocks;if(d=$(document.body).attr("ra-task-type")||null)k.taskType=d;if(d=$(document.body).attr("ra-aet")||null)k.allotted=parseInt(d,10);h.locale&&(k.locale=h.locale);h.location&&(k.location=h.location);
var r=null;$("script").each(function(){var a=($(this).html()||"").match(/projectId":(\d+)/);a&&(r=parseInt(a[1],10))});r&&(k.projectId=r);l.postMessage({method:"got-s2d-features",data:k})}else ca||da(),a||setTimeout(Ga,1E3,1,b)}}var h=$("a[data-oldhref], a[oldhref]");h.off("click",ga).on("click",function(){oa&&ga()});h.off("click",Z).on("click",Z);$("input.ewok-supplemental-file-upload-sendtodevice-button").off("click",Z).on("click",Z);W?(window.addEventListener("message",function(a){0==a.data.indexOf("ewokFilteredItemParameters=")&&
(k(JSON.parse(a.data.slice(27))),window.removeEventListener("message",arguments.callee))},!1),h=document.createElement("script"),h.setAttribute("id","ra-script"),h.innerHTML='var ct = 0;var t = setInterval(function() {if ("undefined" !== typeof ewokFilteredItemParameters) {postMessage("ewokFilteredItemParameters="+JSON.stringify(ewokFilteredItemParameters),"*");clearInterval(t);q();} else if (++ct >= 10) {postMessage("ewokFilteredItemParameters="+JSON.stringify(null),"*");clearInterval(t);q();}},500);function q() { var el=document.getElementById("ra-script"); el.parentNode.removeChild(el); }',
document.head.appendChild(h)):ca||da()}function Na(a){var b={left:[],right:[]};0<a.links.length&&$.each(a.links[0].urls,function(c,e){e=decodeURIComponent(e);var h=a.links[0].blockIds[c],l=a.links[0].labels[c],m=parseInt(l.replace("L","").replace("R",""),10)-1;b.left.push({id:h,index:m,label:l,title:"Simulator URL",type:"WEB",url:C(e)})});2<a.links.length&&$.each(a.links[2].urls,function(c,e){e=decodeURIComponent(e);var h=a.links[2].blockIds[c],l=a.links[2].labels[c],m=parseInt(l.replace("L","").replace("R",
""),10)-1;b.right.push({id:h,index:m,label:l,title:"Simulator URL",type:"WEB",url:C(e)})});if(b.left.length||b.right.length){var c={acquireTime:ha(),blocks:b,nonce:Date.now(),query:fa(a.query||" "),simulator:!0,taskId:X()};l.postMessage({method:"got-s2d-features",data:c,sim:!0})}}function Ea(a){var b={left:[],right:[]};$.each(a.urls,function(a,e){b.left.push({id:"left.result."+a,index:a,label:"L"+(1+a),title:"Task Link",type:"WEB",url:C(e)})});if(b.left.length||b.right.length)a={acquireTime:ha(),
blocks:b,nonce:Date.now(),query:"\u00a0",taskId:X()},l.postMessage({method:"got-s2d-features",data:a}),ca=!0}function da(){l.postMessage({method:"got-s2d-features",data:null})}var Ma=0==document.location.href.indexOf(atob("aHR0cHM6Ly93d3cubGVhcGZvcmNlYXRob21lLmNvbS9xcnAvY29yZS92ZW5kb3JzL2Jsb2NrX3V0aWxpdHlf")),Ba=0==document.location.href.indexOf(atob("aHR0cHM6Ly93d3cubGVhcGZvcmNlYXRob21lLmNvbS9xcnAvY29yZS92ZW5kb3JzL25lZWRzX21ldA==")),Ca=-1!=document.URL.indexOf("leapforceathome.com/qrp/core/vendors/task"),
T=!1,na="left",oa=!1,K=null,O=!1,ka=!1,ma=!1,N=!1,Fa=0,la=!1,Y=!1,pa=!0,W=!1,aa=!1,B;String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};var V=0,sa=0,ia,l=chrome.runtime.connect({name:"ra-features"}),xa=Date.now();$(document.body).attr("current-feat",xa);var H=0;l.onMessage.addListener(function(a){if(I())switch(a.method){case "open-primary-links":if(!L)break;a=$(".ra-links").eq(0);var b={method:"open-urls",urls:JSON.parse(a.attr("data-urls")),labels:JSON.parse(a.attr("data-labels")),
className:"ra-links"};a.attr("data-blockids")&&(b.blockIds=JSON.parse(a.attr("data-blockids")));a.length&&l.postMessage(b);K&&K.validate&&K.validate();break;case "open-secondary-links":if(!L)break;a=$(".ra-links").eq(1<$(".ra-links").length?1:0);b={method:"open-urls",urls:JSON.parse(a.attr("data-urls")),labels:JSON.parse(a.attr("data-labels")),className:"ra-links"};a.attr("data-blockids")&&(b.blockIds=JSON.parse(a.attr("data-blockids")));a.length&&l.postMessage(b);K&&K.validate&&K.validate();break;
case "open-all-links":if(!L)break;a=$(".ra-all-links").length?$(".ra-all-links").eq(0):$(".ra-links").eq(0);b={method:"open-urls",urls:JSON.parse(a.attr("data-urls")),labels:JSON.parse(a.attr("data-labels")),className:"ra-all-links"};a.attr("data-blockids")&&(b.blockIds=JSON.parse(a.attr("data-blockids")));a.length&&l.postMessage(b);K&&K.validate&&K.validate();break;case "show-tab-closer":$(".ra-close-links").show();break;case "hide-tab-closer":$(".ra-close-links").hide();break;case "close-s2d-dialog":ga();
break;case "set-selected-block":pa&&((b=a.taskId===X())?S(a.blockId,a.url):S(null),S(b?a.blockId:null))}});var U=atob("c3Vic2NyaXB0aW9u"),L=!1;P();var qa=$("ol.ewok-rater-header-user span").text().trim();qa&&-1!=qa.indexOf("@")&&chrome.runtime.sendMessage({type:"got-rater-login",login:qa});chrome.storage.onChanged.addListener(function(a){if(I())if(a["close-s2d-dialog"]){var b=a["close-s2d-dialog"].newValue;a=a["close-s2d-dialog"].oldValue;oa=b;b!=a&&P()}else a["focus-on-hover"]?ka=!!a["focus-on-hover"].newValue:
a["hide-contextual-results"]?(ma=!!a["hide-contextual-results"].newValue,ba()):a["highlight-live-results"]?(pa=!!a["highlight-live-results"].newValue)||S(null):a["open-links-separately"]?la=a["open-links-separately"].newValue:a["open-right-to-left"]?(b=a["open-right-to-left"].newValue,a=a["open-right-to-left"].oldValue,Y=b,b!=a&&P()):a["quarter-tick-warning"]?(b=a["quarter-tick-warning"].newValue,a=a["quarter-tick-warning"].oldValue,(N=b)&&!a&&O?P():!b&&a&&G()):a["send-to-device"]?(W=!1!==a["send-to-device"].newValue)?
P():da():a[U]?!a[U].newValue||"active"!=a[U].newValue.status&&"trialing"!=a[U].newValue.status?(L=!1,Ha()):P():a["task-features-enabled"]?(O=!1!==a["task-features-enabled"].newValue)?P():Ha():a["use-separate-window"]?aa=!!a["use-separate-window"].newValue:a["user-locale"]&&O&&P()});var Ia="UNKNOWN",ca=!1})();
